// Copyright (c) Huawei Technologies Co., Ltd. 2025. All rights reserved.
// This source file is part of the Cangjie project, licensed under Apache-2.0
// with Runtime Library Exception.
//
// See https://cangjie-lang.cn/pages/LICENSE for license information.

package cjcov.core

// Template for root html which is named index.html
public let ROOT_PAGE = ###"<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>`%HEAD%`</title>
  <style media="screen" type="text/css">
  `%CSS%`
  </style>
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">Cangjie Code Coverage Report</td></tr>
    <hr class="hr" />

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td class="headerName">Files:</td>
            <td class="headerValue">`%FILE_NUMBER%`</td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerValue" style="text-align:right;">Hit</td>
            <td width="10%" class="headerValue" style="text-align:right;">Total</td>
            <td width="15%" class="headerValue" style="text-align:right;">Coverage</td>
          </tr>
          <tr>
            <td class="headerName">Date:</td>
            <td class="headerValue">`%DATE%`</td>
            <td></td>
            <td class="headerName">Lines:</td>
            <td class="headerTableEntry">`%LINES_EXEC%`</td>
            <td class="headerTableEntry">`%LINES_TOTAL%`</td>
            <td class="headerTableEntry" style="background-color:`%LINES_COLOR%`">`%LINES_COVERAGE%`</td>
          </tr>
          <tr>
            <td class="headerName">Legend:</td>
            <td class="headerValueLeg">
              <span style="background-color:`%LOW_COLOR%`">low: &lt; `%COVERAGE_MED%` %</span>
              <span style="background-color:`%MEDIUM_COLOR%`">medium: &gt;= `%COVERAGE_MED%` %</span>
              <span style="background-color:`%HIGH_COLOR%`">high: &gt;= `%COVERAGE_HIGH%` %</span>
            </td>
            <td></td>
            <td class="headerName">Branches:</td>
            <td class="headerTableEntry">`%BRANCHES_EXEC%`</td>
            <td class="headerTableEntry">`%BRANCHES_TOTAL%`</td>
            <td class="headerTableEntry" style="background-color:`%BRANCHES_COLOR%`">`%BRANCHES_COVERAGE%` </td>
          </tr>
        </table>
      </td>
    </tr>

    <hr class="hr" />
  </table>

  <center>
  <table width="80%" cellpadding="1" cellspacing="1" border="0">
    <!-- Cangjie Coverage Table Width -->
    <tr>
      <td width="44%">&nbsp;</td>
      <td width="8%">&nbsp;</td>
      <td width="8%">&nbsp;</td>
      <td width="8%">&nbsp;</td>
      <td width="8%">&nbsp;</td>
      <td width="8%">&nbsp;</td>
    </tr>
    <tr>
      <td class="coverTableHead">File</td>
      <td class="coverTableHead" colspan="3">Lines</td>
      <td class="coverTableHead" colspan="2">Branches</td>
    </tr>

    `%ROWS%`

    <tr>
      <td colspan="6">&nbsp;</td>
    </tr>
  </table>
  </center>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="hr"><td></tr>
    <tr><td class="footer">Generated by: cjcov (Version `%VERSION%`)</a></td></tr>
  </table>
  <br>

</body>

</html>
"###

// html template for a single source file
public let SOURCE_PAGE = ###"<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>`%HEAD%`</title>
  <style media="screen" type="text/css">
  `%CSS%`
  </style>
</head>

<body>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr><td class="title">Cangjie Code Coverage Report</td></tr>
    <hr class="hr" />

    <tr>
      <td width="100%">
        <table cellpadding="1" border="0" width="100%">
          <tr>
            <td class="headerName">File:</td>
            <td class="headerValue">`%FILENAME%`</td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerValue" style="text-align:right;">Hit</td>
            <td width="10%" class="headerValue" style="text-align:right;">Total</td>
            <td width="15%" class="headerValue" style="text-align:right;">Coverage</td>
          </tr>
          <tr>
            <td class="headerName">Date:</td>
            <td class="headerValue">`%DATE%`</td>
            <td></td>
            <td class="headerName">Lines:</td>
            <td class="headerTableEntry">`%LINES_EXEC%`</td>
            <td class="headerTableEntry">`%LINES_TOTAL%`</td>
            <td class="headerTableEntry" style="background-color:`%LINES_COLOR%`">`%LINES_COVERAGE%`</td>
          </tr>
          <tr>
            <td class="headerName">Legend:</td>
            <td class="headerValueLeg">
              <span style="background-color:`%LOW_COLOR%`">low: &lt; `%COVERAGE_MED%` %</span>
              <span style="background-color:`%MEDIUM_COLOR%`">medium: &gt;= `%COVERAGE_MED%` %</span>
              <span style="background-color:`%HIGH_COLOR%`">high: &gt;= `%COVERAGE_HIGH%` %</span>
            </td>
            <td></td>
            <td class="headerName">Branches:</td>
            <td class="headerTableEntry">`%BRANCHES_EXEC%`</td>
            <td class="headerTableEntry">`%BRANCHES_TOTAL%`</td>
            <td class="headerTableEntry" style="background-color:`%BRANCHES_COLOR%`">`%BRANCHES_COVERAGE%`</td>
          </tr>
        </table>
      </td>
    </tr>

    <hr class="hr" />
  </table>

  <br>
  <table cellspacing="0" cellpadding="1">
     <tr>
      <td width="6%" align="right" class="srcHeader">Line</td>
      <td width="6%" align="center" class="srcHeader">Branch</td>
      <td width="6%" align="center" class="srcHeader">Hit</td>
      <td width="72%" align="left" class="srcHeader src">Source</td>
    </tr>

    `%ROWS%`

  </table>
  <br>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr><td class="hr"><td></tr>
    <tr><td class="footer">Generated by: cjcov (Version `%VERSION%`)</a></td></tr>
  </table>
  <br>

</body>

</html>
"###

// it is used to define style information (CSS) for a document, both for root page and source page
public let HEAD_STYLE = ###"body
{
  color: #000000;
  background-color: #FFFFFF;
}

a:link
{
  color: #000080;
  text-decoration: underline;
}
a:visited
{
  color: maroon;
  text-decoration: underline;
}
a:active
{
  color: #000080;
  text-decoration: underline;
}

td
{
  font-family: sans-serif;
}
td.title
{
  display: flex;
  justify-content: center;
  align-items: flex-end;
  padding-bottom: 10px;
  font-size: 20pt;
  font-weight: 700;
}
td.headerName
{
  display: flex;
  justify-content: flex-end;
  align-items: flex-start;
  color: #000;
  padding-right: 6px;
  font-weight: 700;
  white-space: nowrap;
}
td.headerValue
{
  text-align: left;
  color: #284FA8;
  font-family: sans-serif;
  font-weight: 700;
  white-space: nowrap;
}
td.headerTableEntry
{
  text-align: right;
  color: #000;
  font-weight: 700;
  white-space: nowrap;
  padding: 0 4px 0 12px;
  background-color: #ADD8E6;
}
td.headerValueLeg
{
  text-align: left;
  color: #000;
  font-size: 0.8em;
  white-space: nowrap;
  padding-top: 2px;
}
td.hr
{
  background-color: navy;
  height:3px;
}
td.footer
{
  text-align: center;
  padding-top: 3px;
  font-family: sans-serif;
}

/* Cangjie Coverage Table Head */
td.coverTableHead
{
  text-align: center;
  color: #ffffff;
  background-color: SteelBlue;
  font-family: sans-serif;
  font-size: 1.2em;
  white-space: nowrap;
  padding: 4px 4px;
}

/* Cangjie Coverage File */
td.coverFile
{
  text-align: left;
  padding-left: 10px;
  padding-right: 20px;
  color: #000;
  background-color: #ADD8E6;
  font-family: monospace;
  font-weight: 700;
  font-size: 1.1em;
}
td.coverBar
{
  padding-left: 10px;
  padding-right: 10px;
  background-color: #ADD8E6;
}
td.coverBarOutline
{
  background-color: #ffffff;
}

/* Cangjie Coverage Value */
td.coverValue
{
  padding: 2px 10px 0 10px;
  text-align: right;
  font-family: sans-serif;
  white-space: nowrap;
  font-weight: 700;
}

/* Cangjie Coverage Link Details */
a.detail {
  font-size: 80%;
}
a.detail:link,
a.detail:visited {
  color: #B8D0FF;
}
a.detail:active {
  color: #FFFFFF;
}

.graph-container {
  /* Chart Container Style */
  color: #000;
  font-weight: 700;
  float: left;
}

.graph {
  /*Chart body style*/
  float: left;
  background-color: #fff;
  position: relative;
  width: 280px;
  padding: 0;
}

.graph .bar {
    display: block;
    position: relative;
    border: 1px solid #000;
    text-align: center;
    color: white;
    height: 10px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 0.75rem;
    line-height: 1.9;
}

/* Cangjie Coverage Graph Bar */
.graph .bar span{
    position:absolute;
    left:1em
}

td.coveredLine,
span.coveredLine
{
    background-color: `%COVERED_COLOR%`!important;
}

td.uncoveredLine,
span.uncoveredLine
{
    background-color: `%UNCOVERED_COLOR%`!important;
}

.linebranch, .linecount
{
    border-right: 1px gray solid;
    background-color: lightgray;
}

.linebranchDetails
{
    position: relative;
}
.linebranchSummary
{
    cursor: help;
}
.linebranchContents
{
    font-family: sans-serif;
    font-size: small;
    text-align: left;
    position: absolute;
    width: 15em;
    padding: 1em;
    background: white;
    border: solid gray 1px;
    box-shadow: 5px 5px 10px gray;
    z-index: 1; /* show in front of the table entries */
}

.takenBranch
{
    color: `%TAKENBRANCH_COLOR%`!important;
    cursor: help;
}

.notTakenBranch
{
    color: `%NOT_TAKENBRANCH_COLOR%`!important;
    cursor: help;
}

.src
{
    padding-left: 13px;
}

.srcHeader,
span.takenBranch,
span.notTakenBranch
{
    font-family: "Fira Code", "Consolas", "Courier New", Courier, monospace;
    font-weight: 700;
}

pre
{
    height: 15px;
    margin: 0;
}

.lineno {
    background-color: #EFE383;
}
.lineno {
    border-right: 1px solid #BBB15F;
}"###
public let ROOT_ROW = ###"<tr>
    <td class="coverFile" `%ALTSTYLE%`>`%FILE_NAME%`</td>
    <td class="coverBar" align="center" `%ALTSTYLE%`>
    <table border=0 cellspacing=0 cellpadding=1><tr><td class="coverBarOutline">
            <div class="graph"><strong class="bar" style="width:`%LINES_COVERAGE_RATE%`%; `%BAR_BORDER%`background-color:`%LINES_BAR%`"></strong></div>
            </td></tr></table>
    </td>
    <td class="CoverValue" style="font-weight:bold; background-color:`%LINES_COLOR%`;">`%LINES_EXEC%` / `%LINES_TOTAL%`</td>
    <td class="CoverValue" style="font-weight:bold; background-color:`%LINES_COLOR%`;">`%LINES_COVERAGE%`</td>
    <td class="CoverValue" style="background-color:`%BRANCHES_COLOR%`;">`%ROOT_ROW_BRANCHES_INFO%`</td>
    <td class="CoverValue" style="background-color:`%BRANCHES_COLOR%`;">`%BRANCHES_COVERAGE%`</td>
</tr>"###
public let SOURCE_ROW = ###"<tr>
<td align="right" class="lineno"><pre>`%LINE_NUMBER%`</pre></td>
<td align="right" class="linebranch">`%LINE_BRANCH%`</td>
<td align="center" class="linecount `%COV_CLASS%`"><pre>`%LINE_COUNT%`</pre></td>
<td align="left" class="src `%COV_CLASS%`"><pre>`%SOURCE%`</pre></td>
</tr>"###
public let BRANCH_DETAIL = ###"<details class="linebranchDetails">
<summary class="linebranchSummary">`%BRANCH_SUMMARY%`</summary>
<div class="linebranchContents">
`%BRANCH_CONTENTS%`
</div>
</details>
"###
public let XML_DETAIL = ###"<?xml version="1.0"?>
<coverage-data>
  <coverage-line>`%XML_LINE_EXEC%`</coverage-line>
  <total-line>`%XML_LINE_TOTAL%`</total-line>
  <coverage-branch>`%XML_BRANCHES_EXEC%`</coverage-branch>
  <total-branch>`%XML_BRANCHES_TOTAL%`</total-branch>
  <coverage-function>0</coverage-function>
  <total-function>0</total-function>
</coverage-data>
"###
